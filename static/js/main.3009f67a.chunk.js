(this["webpackJsonproman-moravcik"]=this["webpackJsonproman-moravcik"]||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n(10),r=(n(44),n(45),n(38)),c=n(88),a=n(87),l=n(9),d=n(30),s=n.n(d),u=n(31),p=n(7),j=function(e,t){return new Promise((function(n,o){(new google.maps.Geocoder).geocode(Object(p.a)({},e,t),(function(e,t){if(t===google.maps.GeocoderStatus.OK){var i=null===e||void 0===e?void 0:e[0].geometry.location.lat(),r=null===e||void 0===e?void 0:e[0].geometry.location.lng();console.log(i,r),n(e)}else o("Failed to load geometry for location.")}))}))},b=function(e){return j("placeId",e)},h=function(){return new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(e,(function(e){t("Could not access position.")}),{timeout:5e3,maximumAge:0}):t("Geolocation is not supported by this browser.")}))},f=n(3),v=n(18),O=n.n(v),w="LOAD_WEATHER",g="LOAD_WEATHER_ERROR",x="LOAD_WEATHER_SUCCESS",m="SET_LOCAL_WEATHER",y="SET_FAVORITE_WEATHER",E="UNSET_FAVORITE_WEATHER",_="SET_CURRENT_WEATHER",S=function(e){return function(t){t({type:_,payload:{id:e}})}},A=function(e,t,n){return function(o,i){return console.log("loadWeatherAction",i()),new Promise((function(r,c){o({type:w});var a=localStorage.getItem("weather"),l=a&&JSON.parse(a);if(null===l||void 0===l?void 0:l[e+","+t]){var d=l[e+","+t];o({type:x,payload:{id:d.woeid,current:d.woeid,local:n?d.woeid:null,weather:d}}),r(d)}else(function(e,t){return O()("https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/search/?lattlong="+e+","+t).then((function(e){return O()("https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/"+e.data[0].woeid)}))})(e,t).then((function(c){var a=c.data;localStorage.setItem("weather",JSON.stringify(Object(f.a)(Object(f.a)({},i().places.weather),{},Object(p.a)({},e+","+t,a)))),o({type:x,payload:{id:c.data.woeid,current:a.woeid,local:n?a.woeid:null,weather:c.data}}),r(c)}),(function(e){o({type:g}),c(e)}))}))}},C=n(2),k=Object(a.a)({page:{borderTop:"1px solid #999"},buttonStyle:{border:"none",padding:"8px",marginLeft:"8px",color:"#09F",fontWeight:"bold",backgroundColor:"rgba(0,0,0,0)",transition:"all 500ms","&:hover":{backgroundColor:"#EAEAEA",cursor:"pointer",color:"black"}}}),R=function(e){var t,n=e.weatherLocation,o=e.small,i=e.smaller,r=Object(c.a)().t,a=Object(l.c)((function(e){return e.places})),d=Object.values(a.favorite),u=k(),p=Object(l.b)(),j=n.woeid;return Object(C.jsxs)("div",{style:{padding:"8px",display:o?"inline-block":"block",backgroundColor:"white",marginTop:"8px",marginRight:"8px",borderRadius:"8px",border:"solid 1px #EAEAEA"},children:[Object(C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px"},children:[Object(C.jsxs)("div",{style:{display:"flex"},children:[Object(C.jsxs)("h3",{style:{padding:"0px",margin:"0px"},onClick:function(){return p(S(j))},children:[n.title," / ",null===(t=n.parent)||void 0===t?void 0:t.title]}),Object(C.jsx)("button",{className:u.buttonStyle,onClick:function(){return p(S(j))},children:"Open"})]}),d.includes(j)?Object(C.jsx)("button",{className:u.buttonStyle,onClick:function(){return p(function(e){return function(t){t({type:E,payload:{id:e}})}}(j))},children:r("Remove from Favorites")}):Object(C.jsx)("button",{className:u.buttonStyle,onClick:function(){return p(function(e){return function(t){t({type:y,payload:{id:e}})}}(j))},children:r("Add to favorites")})]}),Object(C.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat( auto-fill, minmax(250px, 1fr) )",width:"100%"},children:!i&&n.consolidated_weather.map((function(e,t){var n=s()(e.applicable_date,"YYYY-MM-DD").format("D MMM YYYY");return o&&t<3||!o?Object(C.jsxs)("div",{style:{display:"block",padding:"8px",margin:"8px",borderRadius:"8px",border:"solid 1px #EAEAEA"},children:[Object(C.jsx)("div",{children:n}),o?Object(C.jsxs)("div",{children:[Object(C.jsx)("strong",{style:{fontSize:"20px"},children:Object(C.jsxs)("div",{children:[parseInt(e.the_temp)," \xb0C"]})}),Object(C.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"4px"},children:Object(C.jsx)("img",{width:45,alt:e.weather_state_name,src:"https://www.metaweather.com/static/img/weather/png/64/"+e.weather_state_abbr+".png"})})]}):Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"4px"},children:Object(C.jsx)("img",{alt:e.weather_state_name,src:"https://www.metaweather.com/static/img/weather/png/64/"+e.weather_state_abbr+".png"})}),Object(C.jsxs)("div",{style:{fontSize:"16px"},children:[Object(C.jsx)("strong",{style:{fontSize:"20px"},children:Object(C.jsxs)("div",{children:[parseInt(e.the_temp)," \xb0C"]})}),Object(C.jsxs)("div",{style:{fontSize:"12px",backgroundColor:"#EAEAEA",padding:"4px"},children:[Object(C.jsxs)("div",{children:["Min: ",parseInt(e.min_temp)," \xb0C"]}),Object(C.jsxs)("div",{children:["Max: ",parseInt(e.max_temp)," \xb0C"]})]}),Object(C.jsxs)("div",{children:["Weather: ",e.weather_state_name]}),Object(C.jsxs)("div",{children:["Wind direction: ",e.wind_direction_compass]}),Object(C.jsxs)("div",{children:["Wind speed: ",parseInt(e.wind_speed)," m/s"]}),Object(C.jsxs)("div",{children:["Humidity: ",parseInt(e.humidity)," %"]})]})]})]},t):null}))})]},n.woeid)},T=function(e){var t,n,i,a,d=Object(c.a)().t,s=Object(l.c)((function(e){return e.places})),p=Object.values(s.weather);Object(o.useEffect)((function(){!function(e,t){localStorage.setItem(e,JSON.stringify(t))}("places",s)}),[s]);var j=k(),f=Object(l.b)(),v=Object(o.useState)(null),O=Object(r.a)(v,2),w=O[0],g=O[1];return Object(C.jsxs)("div",{className:j.page,children:[Object(C.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",backgroundColor:"#4c85cd",padding:"8px",color:"white"},children:[Object(C.jsx)("div",{style:{fontSize:"24px"},children:d("Weather")}),Object(C.jsx)("div",{style:{width:"350px",color:"black"},children:Object(C.jsx)(u.a,{selectProps:{value:w,onChange:function(e){b(e.value.place_id).then((function(e){if(Array.isArray(e)){var t=null===e||void 0===e?void 0:e[0].geometry.location.lat(),n=null===e||void 0===e?void 0:e[0].geometry.location.lng();f(A(t,n,!1))}})),g(e)}},onLoadFailed:function(e){return console.error("Could not inject Google script",e)},autocompletionRequest:{types:["(cities)"]}})}),Object(C.jsx)("button",{onClick:function(){h().then((function(e){f(A(e.coords.latitude,e.coords.longitude,!0))}))},children:"Current Location"})]}),Object(C.jsxs)("div",{style:{backgroundColor:"#ccdbdb"},children:[Object(C.jsxs)("div",{style:{padding:"16px"},children:[Object(C.jsx)("h2",{children:"Selected"}),p&&(null===(t=p.filter((function(e){return e.woeid===s.current})))||void 0===t||null===(n=t.map)||void 0===n?void 0:n.call(t,(function(e){return Object(C.jsx)(R,{weatherLocation:e},e.woeid)})))]}),Object(C.jsxs)("div",{style:{padding:"16px"},children:[Object(C.jsx)("h2",{children:"Favorite"}),p&&(null===(i=p.filter((function(e){return s.favorite.includes(e.woeid)})))||void 0===i?void 0:i.map((function(e){return Object(C.jsx)(R,{small:!0,weatherLocation:e},e.woeid)})))]}),Object(C.jsxs)("div",{style:{padding:"16px"},children:[Object(C.jsx)("h2",{children:"Recent"}),p&&(null===(a=p.filter((function(e){return!s.favorite.includes(e.woeid)&&e.woeid!==s.current})))||void 0===a?void 0:a.map((function(e){return Object(C.jsx)(R,{smaller:!0,weatherLocation:e},e.woeid)})))]})]})]})};var W=function(){return Object(C.jsx)("div",{className:"App",children:Object(C.jsx)(T,{})})},N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function I(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var L=n(8),P=n(37),D=n(39),M=Object(f.a)({view:null,current:null,local:null,favorite:[],places:[],weather:{},loadingPlace:!1,errorPlace:!1},function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):{}}("places")),H=function(){var e,t,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case _:return Object(f.a)(Object(f.a)({},o),{},{current:null===(e=i.payload)||void 0===e?void 0:e.id});case m:return Object(f.a)(Object(f.a)({},o),{},{local:null===(t=i.payload)||void 0===t?void 0:t.id});case y:return Object(f.a)(Object(f.a)({},o),{},{favorite:[].concat(Object(D.a)(o.favorite),[null===(n=i.payload)||void 0===n?void 0:n.id])});case E:return Object(f.a)(Object(f.a)({},o),{},{favorite:o.favorite.filter((function(e){var t;return e!==(null===(t=i.payload)||void 0===t?void 0:t.id)}))});case w:return Object(f.a)(Object(f.a)({},o),{},{loadingPlace:!0,errorPlace:!1});case x:return i.payload?Object(f.a)(Object(f.a)({},o),{},{weather:Object(f.a)(Object(f.a)({},o.weather),{},Object(p.a)({},i.payload.id,i.payload.weather)),current:i.payload.current||o.current,local:i.payload.local||o.local,loadingPlace:!1}):o;case g:return Object(f.a)(Object(f.a)({},o),{},{loadingPlace:!1,errorPlace:!0});default:return o}},U=Object(L.c)({places:H}),Y=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:L.d)(Object(L.a)(P.a)),F=Object(L.e)(U,Y);i.render(Object(C.jsx)(o.StrictMode,{children:Object(C.jsx)(l.a,{store:F,children:Object(C.jsx)(W,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/weather",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/weather","/service-worker.js");N?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):I(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):I(t,e)}))}}()}},[[75,1,2]]]);
//# sourceMappingURL=main.3009f67a.chunk.js.map