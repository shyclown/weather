(this["webpackJsonproman-moravcik"]=this["webpackJsonproman-moravcik"]||[]).push([[0],{46:function(e,t,n){},47:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n(10),r=(n(46),n(47),n(38)),a=n(88),c=n(87),l=n(9),d=n(30),s=n(7),u=function(e,t){return new Promise((function(n,o){(new google.maps.Geocoder).geocode(Object(s.a)({},e,t),(function(e,t){if(t===google.maps.GeocoderStatus.OK){var i=null===e||void 0===e?void 0:e[0].geometry.location.lat(),r=null===e||void 0===e?void 0:e[0].geometry.location.lng();console.log(i,r),n(e)}else o("Failed to load geometry for location.")}))}))},p=function(e){return u("placeId",e)},b=function(){return new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(e,(function(e){t("Could not access position.")}),{timeout:5e3,maximumAge:0}):t("Geolocation is not supported by this browser.")}))},j=n(3),h=n(18),f=n.n(h),v="LOAD_WEATHER",O="LOAD_WEATHER_ERROR",g="LOAD_WEATHER_SUCCESS",w="SET_LOCAL_WEATHER",x="SET_FAVORITE_WEATHER",m="UNSET_FAVORITE_WEATHER",y="SET_CURRENT_WEATHER",E=function(e){return function(t){t({type:y,payload:{id:e}})}},_=function(e,t,n){return function(o,i){return console.log("loadWeatherAction",i()),new Promise((function(r,a){o({type:v});var c=localStorage.getItem("weather"),l=c&&JSON.parse(c);if(null===l||void 0===l?void 0:l[e+","+t]){var d=l[e+","+t];o({type:g,payload:{id:d.woeid,current:d.woeid,local:n?d.woeid:null,weather:d}}),r(d)}else(function(e,t){return f()("https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/search/?lattlong="+e+","+t).then((function(e){return f()("https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/"+e.data[0].woeid)}))})(e,t).then((function(a){var c=a.data;localStorage.setItem("weather",JSON.stringify(Object(j.a)(Object(j.a)({},i().places.weather),{},Object(s.a)({},e+","+t,c)))),o({type:g,payload:{id:a.data.woeid,current:c.woeid,local:n?c.woeid:null,weather:a.data}}),r(a)}),(function(e){o({type:O}),a(e)}))}))}},A=n(33),S=n.n(A),C=n(2),k=Object(c.a)({page:{borderTop:"1px solid #999"},card:{padding:"8px",backgroundColor:"white",marginTop:"8px",marginRight:"8px",borderRadius:"8px",border:"solid 1px #EAEAEA"},buttonStyle:{border:"none",padding:"8px",marginLeft:"8px",color:"#09F",fontWeight:"bold",backgroundColor:"rgba(0,0,0,0)",transition:"all 500ms","&:hover":{backgroundColor:"#EAEAEA",cursor:"pointer",color:"black"}}}),R=function(e){var t,n=e.weatherLocation,o=e.small,i=e.smaller,r=Object(a.a)().t,c=Object(l.c)((function(e){return e.places})),d=Object.values(c.favorite),s=k(),u=Object(l.b)(),p=n.woeid;return Object(C.jsxs)("div",{className:s.card,style:{display:o?"inline-block":"block"},children:[Object(C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px"},children:[Object(C.jsxs)("div",{style:{display:"flex"},children:[Object(C.jsxs)("h3",{style:{padding:"0px",margin:"0px"},onClick:function(){return u(E(p))},children:[n.title," / ",null===(t=n.parent)||void 0===t?void 0:t.title]}),Object(C.jsx)("button",{className:s.buttonStyle,onClick:function(){return u(E(p))},children:r("Open")})]}),d.includes(p)?Object(C.jsx)("button",{className:s.buttonStyle,onClick:function(){return u(function(e){return function(t){t({type:m,payload:{id:e}})}}(p))},children:r("Remove from Favorites")}):Object(C.jsx)("button",{className:s.buttonStyle,onClick:function(){return u(function(e){return function(t){t({type:x,payload:{id:e}})}}(p))},children:r("Add to favorites")})]}),Object(C.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat( auto-fill, minmax(250px, 1fr) )",width:"100%"},children:!i&&n.consolidated_weather.map((function(e,t){var n=S()(e.applicable_date,"YYYY-MM-DD").format("D MMM YYYY");return o&&t<3||!o?Object(C.jsxs)("div",{style:{display:"block",padding:"8px",margin:"8px",borderRadius:"8px",border:"solid 1px #EAEAEA"},children:[Object(C.jsx)("div",{children:n}),o?Object(C.jsxs)("div",{children:[Object(C.jsx)("strong",{style:{fontSize:"20px"},children:Object(C.jsxs)("div",{children:[parseInt(e.the_temp)," \xb0C"]})}),Object(C.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"4px"},children:Object(C.jsx)("img",{width:45,alt:e.weather_state_name,src:"https://www.metaweather.com/static/img/weather/png/64/"+e.weather_state_abbr+".png"})})]}):Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"4px"},children:Object(C.jsx)("img",{alt:e.weather_state_name,src:"https://www.metaweather.com/static/img/weather/png/64/"+e.weather_state_abbr+".png"})}),Object(C.jsxs)("div",{style:{fontSize:"16px"},children:[Object(C.jsx)("strong",{style:{fontSize:"20px"},children:Object(C.jsxs)("div",{children:[parseInt(e.the_temp)," \xb0C"]})}),Object(C.jsxs)("div",{style:{fontSize:"12px",backgroundColor:"#EAEAEA",padding:"4px"},children:[Object(C.jsxs)("div",{children:[r("Min"),": ",parseInt(e.min_temp)," \xb0C"]}),Object(C.jsxs)("div",{children:[r("Max"),": ",parseInt(e.max_temp)," \xb0C"]})]}),Object(C.jsxs)("div",{children:[r("Weather"),": ",e.weather_state_name]}),Object(C.jsxs)("div",{children:[r("Wind direction"),": ",e.wind_direction_compass]}),Object(C.jsxs)("div",{children:[r("Wind speed"),": ",parseInt(e.wind_speed)," m/s"]}),Object(C.jsxs)("div",{children:[r("Humidity"),": ",parseInt(e.humidity)," %"]})]})]})]},t):null}))})]},n.woeid)},T=Object(c.a)({page:{borderTop:"1px solid #999"},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-between",backgroundColor:"#4c85cd",padding:"8px",color:"white"},buttonStyle:{border:"none",padding:"8px",marginLeft:"8px",color:"#09F",fontWeight:"bold",backgroundColor:"rgba(0,0,0,0)",transition:"all 500ms","&:hover":{backgroundColor:"#EAEAEA",cursor:"pointer",color:"black"}}}),W=function(e){var t,n,i,c,s=Object(a.a)().t,u=Object(l.c)((function(e){return e.places})),j=Object.values(u.weather);Object(o.useEffect)((function(){!function(e,t){localStorage.setItem(e,JSON.stringify(t))}("places",u)}),[u]);var h=T(),f=Object(l.b)(),v=Object(o.useState)(null),O=Object(r.a)(v,2),g=O[0],w=O[1];return Object(C.jsxs)("div",{className:h.page,children:[Object(C.jsxs)("div",{className:h.wrapper,children:[Object(C.jsx)("div",{style:{fontSize:"24px"},children:s("Weather")}),Object(C.jsx)("div",{style:{width:"350px",color:"black"},children:Object(C.jsx)(d.a,{selectProps:{value:g,onChange:function(e){p(e.value.place_id).then((function(e){if(Array.isArray(e)){var t=null===e||void 0===e?void 0:e[0].geometry.location.lat(),n=null===e||void 0===e?void 0:e[0].geometry.location.lng();f(_(t,n,!1))}})),w(e)}},onLoadFailed:function(e){return console.error("Could not inject Google script",e)},autocompletionRequest:{types:["(cities)"]}})}),Object(C.jsxs)("button",{onClick:function(){b().then((function(e){f(_(e.coords.latitude,e.coords.longitude,!0))}))},children:[" ",s("Current Location")]})]}),Object(C.jsxs)("div",{style:{backgroundColor:"#ccdbdb"},children:[Object(C.jsxs)("div",{style:{padding:"16px"},children:[Object(C.jsx)("h2",{children:s("Selected")}),j&&(null===(t=j.filter((function(e){return e.woeid===u.current})))||void 0===t||null===(n=t.map)||void 0===n?void 0:n.call(t,(function(e){return Object(C.jsx)(R,{weatherLocation:e},e.woeid)})))]}),Object(C.jsxs)("div",{style:{padding:"16px"},children:[Object(C.jsx)("h2",{children:s("Favorite")}),j&&(null===(i=j.filter((function(e){return u.favorite.includes(e.woeid)})))||void 0===i?void 0:i.map((function(e){return Object(C.jsx)(R,{small:!0,weatherLocation:e},e.woeid)})))]}),Object(C.jsxs)("div",{style:{padding:"16px"},children:[Object(C.jsx)("h2",{children:s("Recent")}),j&&(null===(c=j.filter((function(e){return!u.favorite.includes(e.woeid)&&e.woeid!==u.current})))||void 0===c?void 0:c.map((function(e){return Object(C.jsx)(R,{smaller:!0,weatherLocation:e},e.woeid)})))]})]})]})};var N=function(){return Object(C.jsx)("div",{className:"App",children:Object(C.jsx)(W,{})})},L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function I(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var P=n(8),D=n(37),M=n(39),F=Object(j.a)({view:null,current:null,local:null,favorite:[],places:[],weather:{},loadingPlace:!1,errorPlace:!1},function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):{}}("places")),H=function(){var e,t,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case y:return Object(j.a)(Object(j.a)({},o),{},{current:null===(e=i.payload)||void 0===e?void 0:e.id});case w:return Object(j.a)(Object(j.a)({},o),{},{local:null===(t=i.payload)||void 0===t?void 0:t.id});case x:return Object(j.a)(Object(j.a)({},o),{},{favorite:[].concat(Object(M.a)(o.favorite),[null===(n=i.payload)||void 0===n?void 0:n.id])});case m:return Object(j.a)(Object(j.a)({},o),{},{favorite:o.favorite.filter((function(e){var t;return e!==(null===(t=i.payload)||void 0===t?void 0:t.id)}))});case v:return Object(j.a)(Object(j.a)({},o),{},{loadingPlace:!0,errorPlace:!1});case g:return i.payload?Object(j.a)(Object(j.a)({},o),{},{weather:Object(j.a)(Object(j.a)({},o.weather),{},Object(s.a)({},i.payload.id,i.payload.weather)),current:i.payload.current||o.current,local:i.payload.local||o.local,loadingPlace:!1}):o;case O:return Object(j.a)(Object(j.a)({},o),{},{loadingPlace:!1,errorPlace:!0});default:return o}},U=Object(P.c)({places:H}),Y=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:P.d)(Object(P.a)(D.a)),J=Object(P.e)(U,Y);i.render(Object(C.jsx)(o.StrictMode,{children:Object(C.jsx)(l.a,{store:J,children:Object(C.jsx)(N,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/weather",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/weather","/service-worker.js");L?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):I(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):I(t,e)}))}}()}},[[77,1,2]]]);
//# sourceMappingURL=main.58d27a1d.chunk.js.map